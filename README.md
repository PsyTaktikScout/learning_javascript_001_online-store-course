# learning_javascript_001_online-store-course

Источник: https://www.youtube.com/watch?v=H2GCkRF9eko&
Название: React & Node.js ИНТЕРНЕТ МАГАЗИН С НУЛЯ. PERN stack PostgreSQL + express + React js + node.js
Автор: Ulbi TV

1. создаем папки "client" и "server"
2. создаем в папке "server" файл "index.js"
3. переходим в терминале в папку "server" командой "cd server"
4. и проинициализируем проект командой "npm init -y", после этого в папке дожен появиться файл "package.json". В нем - описание проекта и зависимости которые в нем находятся. Начнем разработку с того, что установим эти зависимости.
5. Мы будем использовать фреймворк "Express" в качестве системы управления базами данных "PostgreSQL", по-этому устанавливаем два модуля - "pg" "pg-hstore". И также нам понадобится "sequelize" - это ORM для реляционных баз данных на node.js. И также, для того, чтобы мы могли обращаться с браузера к нашему серверу, нам понадобится "cors". И чтобы задавать переменные окружения установим модуль "dotenv".
   Устанавливаем командой: "npm install express pg pg-hstore sequelize cors dotenv".
   После установки все модули можно увидеть в поле "dependencies"
6. Также как зависимость для разработки установим "nodemon". Он нужен для того, чтобы при каждом изменении в коде не перезапускать сервер - он будет перезапускать его автоматически.
   Устанавливаем командой: "npm install -D nodemon".
7. После установки напишем скрипт который будет запускать приложение в режиме разработки.
   Для этого в поле "scripts" пишем команду "dev" и исполняемую команду, которая будет выполняться при запуске этого скрипта "nodemon index.js"

8. Теперь перейдем к созданию структуры приложения - в файл index.js.
9. с помощью "require" мы можем импортировать какие-то модули в файл. В данном случае импортируем "express":
   const express = require('express')
10. следующим этапом создадим объект вызвав функцию "express":
    const app = express()
    с него и будет начинаться запуск нашего приложения.
11. следующим этапом укажем порт на котором наше приложение будет работать:
    const PORT = 5000
12. и затем у "app" вызываем функцию "listen" в которой указываем какой порт должен прослушивать наш сервер, а вторым параметром передаем колбек который отработает при успешном запуске нашего сервера:
    app.listen(PORT, ()=> console.log(`Server start on port ${PORT}`))
13. теперь в терминале запускаем тот самый скрипт который мы сделали в package.json:
    npm run dev
    если в логах вы увидели "Server start on port 5000", значит сервер запустился успешно.
14. Но так объявлять порт(статично) не очень хорошая практика, по этому всю конфигурацию мы будем выносить в переменные окружения. Для этого создадим файл ".env". Здесь просто указываем название переменной, равно и его значение (сделаем PORT=7000):
    PORT=7000
15. Теперь получать порт мы будем из переменных окружения, делается это таким способом:
    const PORT = process.env.PORT
    если же эта переменная не заданна, тогда по умолчанию будем ставить 5000:
    const PORT = process.env.PORT || 5000
16. Но для того что бы наш сервет мог считывать этот файл, необходимо так же сюда импортировать конфиг из мобуля dotenv, который мы установили в самом начале:
    require('dotenv').config()
17. установим порт на 5000

18. Следующим этапом сконфигурируем подключение к базе данных. Это один из самых важных моментов при разработке, так как база данных является основной частью любого веб приложения(ну практически любого).
    Создаем файл db.js
19. Сдесь мы опять же, импортируем Sequelize, сразу же делаем деструктуализацию, так как модуль большой и нам нужен конкретно вот этот вот класс:
    const {Sequelize} = require('sequelize')
20. Затем мы экспортируем объект который мы создаем из этого класса:
    module.expotrs = new Sequelize({
    })
21. В конструкторе будем указывать конфигурацию. В данном случае здесь необходимо передать пользователя под которым будем подключаться к базе данных, пароль и т.д. В данном курсе в качестве системы будем использовать postgresql, по этому он должен быть установлен у вас на компьютере. Вместе с суБД у вас установится программа pgAdmin - с помощью нее можно удобно управлять базой данных.
22. Первое с чего начнем, в pgAdmin установим новою базу данных "online_store".
23. Теперь приступим к конфигурации. Возврвщаемся к написанию кода.
24. Все настройки подключения к базе данных вынесем в переменные окружения (файл ".env"). Здесь у нас будут следующие переменные: это название базы данных "online_store", название пользователя под которым мы будем подключаться
